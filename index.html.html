<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Fitness Mini App</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 10px;
      background: #f5f5f5;
    }

    .tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 10px;
    }

    .tab {
      padding: 10px;
      background: #ddd;
      border-radius: 5px;
      cursor: pointer;
    }

    .tab.active {
      background: #4CAF50;
      color: white;
    }

    .section {
      display: none;
      background: white;
      padding: 10px;
      border-radius: 5px;
    }

    .section.active {
      display: block;
    }

    .food-item {
      margin-bottom: 8px;
      cursor: pointer;
    }

    .water-box {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid #ccc;
    }

    button {
      padding: 5px 10px;
      margin-top: 5px;
    }

    .day {
      margin-bottom: 10px;
      cursor: pointer;
      background: #eee;
      padding: 8px;
      border-radius: 5px;
    }

    .exercise {
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

<!-- –í–ö–õ–ê–î–ö–ò -->
<div class="tabs">
  <div class="tab active" onclick="openTab('food')">–ï–¥–∞</div>
  <div class="tab" onclick="openTab('workout')">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
  <div class="tab" onclick="openTab('stats')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
</div>

<!-- –ï–î–ê -->
<div id="food" class="section active">
  <h3>–ï–¥–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>

  <div class="food-item" onclick="openRecipe('–û–≤—Å—è–Ω–∫–∞')">üçΩ –û–≤—Å—è–Ω–∫–∞ —Å –±–∞–Ω–∞–Ω–æ–º</div>
  <div class="food-item" onclick="openRecipe('–ö—É—Ä–∏—Ü–∞')">üçΩ –ö—É—Ä–∏—Ü–∞ —Å —Ä–∏—Å–æ–º</div>
  <div class="food-item" onclick="openRecipe('–¢–≤–æ—Ä–æ–≥')">üçΩ –¢–≤–æ—Ä–æ–≥</div>

  <!-- –í–û–î–ê -->
  <div class="water-box">
    <h4>–í–æ–¥–∞</h4>
    <p>–¶–µ–ª—å: <b>2000 –º–ª</b></p>

    <input type="number" id="waterInput" placeholder="–°–∫–æ–ª—å–∫–æ –≤—ã–ø–∏–ª (–º–ª)">
    <button onclick="addWater()">+</button>

    <p>–í—ã–ø–∏—Ç–æ: <span id="waterDone">0</span> –º–ª</p>
    <p>–û—Å—Ç–∞–ª–æ—Å—å: <span id="waterLeft">2000</span> –º–ª</p>
  </div>
</div>

<!-- –≠–ö–†–ê–ù –†–ï–¶–ï–ü–¢–ê -->
<div id="recipe" class="section">
  <h3 id="recipeTitle"></h3>
  <p id="recipeText"></p>
  <button onclick="backToFood()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –¢–†–ï–ù–ò–†–û–í–ö–ò -->
<div id="workout" class="section">
  <h3>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>

  <div class="day" onclick="openDay('monday')">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</div>
  <div class="day" onclick="openDay('wednesday')">–°—Ä–µ–¥–∞</div>
  <div class="day" onclick="openDay('friday')">–ü—è—Ç–Ω–∏—Ü–∞</div>
</div>

<!-- –î–ï–ù–¨ –¢–†–ï–ù–ò–†–û–í–ö–ò -->
<div id="day" class="section">
  <h3 id="dayTitle"></h3>

  <div class="exercise">
    –ñ–∏–º –ª—ë–∂–∞:
    <input type="number" id="bench">
    <button onclick="saveExercise('bench')">+</button>
  </div>

  <div class="exercise">
    –ü—Ä–∏—Å–µ–¥:
    <input type="number" id="squat">
    <button onclick="saveExercise('squat')">+</button>
  </div>

  <button onclick="backToWorkout()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
<div id="stats" class="section">
  <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
  <p>–î–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ</p>
</div>

<script>
Telegram.WebApp.ready();

// –≤–∫–ª–∞–¥–∫–∏
function openTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById(id).classList.add('active');
}

// –í–û–î–ê
let water = Number(localStorage.getItem('water')) || 0;
const waterGoal = 2000;

function updateWater() {
  waterDone.innerText = water;
  waterLeft.innerText = Math.max(waterGoal - water, 0);
}

function addWater() {
  const value = Number(waterInput.value);
  if (!value) return;
  water += value;
  localStorage.setItem('water', water);
  waterInput.value = '';
  updateWater();
}
updateWater();

// –†–ï–¶–ï–ü–¢–´
function openRecipe(name) {
  food.classList.remove('active');
  recipe.classList.add('active');

  recipeTitle.innerText = name;

  const recipes = {
    '–û–≤—Å—è–Ω–∫–∞': '–û–≤—Å—è–Ω–∫–∞ 60–≥\n–ë–∞–Ω–∞–Ω 100–≥\n–ú—ë–¥ 10–≥',
    '–ö—É—Ä–∏—Ü–∞': '–ö—É—Ä–∏—Ü–∞ 150–≥\n–†–∏—Å 100–≥\n–û–≤–æ—â–∏',
    '–¢–≤–æ—Ä–æ–≥': '–¢–≤–æ—Ä–æ–≥ 200–≥\n–Ø–≥–æ–¥—ã'
  };

  recipeText.innerText = recipes[name];
}

function backToFood() {
  recipe.classList.remove('active');
  food.classList.add('active');
}

// –¢–†–ï–ù–ò–†–û–í–ö–ò
let currentDay = '';

function openDay(day) {
  workout.classList.remove('active');
  dayDiv = document.getElementById('day');
  dayDiv.classList.add('active');
  currentDay = day;
  dayTitle.innerText = day;
}

function saveExercise(ex) {
  const value = document.getElementById(ex).value;
  if (!value) return;
  localStorage.setItem(currentDay + '_' + ex, value);
  alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
}

function backToWorkout() {
  day.classList.remove('active');
  workout.classList.add('active');
}
</script>

</body>
</html>
