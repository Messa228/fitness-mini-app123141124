<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">

  <!-- –ê–í–¢–û–ú–ê–°–®–¢–ê–ë –ü–û–î –£–°–¢–†–û–ô–°–¢–í–û -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Fitness Mini App</title>

  <!-- Telegram -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f2f2f2;
    }

    /* –û–ë–©–ò–ï –≠–ö–†–ê–ù–´ */
    .screen {
      display: none;
      min-height: 100vh;
      padding: 15px;
      box-sizing: border-box;
    }

    .screen.active {
      display: block;
    }

    /* –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù */
    .home {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .home-block {
      flex: 1;
      margin: 8px 0;
      border-radius: 12px;
      color: white;
      font-size: 22px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .food-block { background: #4CAF50; }
    .workout-block { background: #FF9800; }
    .stats-block { background: #2196F3; }

    /* –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î */
    .back {
      margin-bottom: 10px;
      cursor: pointer;
      color: #555;
    }

    /* –ï–î–ê */
    .food-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .food-item input {
      margin-right: 10px;
    }

    .water-box {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #ccc;
    }

    input, button {
      font-size: 16px;
      padding: 6px;
      margin-top: 5px;
    }

    button {
      cursor: pointer;
    }

    /* –¢–†–ï–ù–ò–†–û–í–ö–ò */
    .day {
      background: #e0e0e0;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 10px;
      cursor: pointer;
      font-size: 16px;
    }

    .exercise {
      margin-bottom: 12px;
    }
  </style>
</head>

<body>

<!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
<div id="home" class="screen active home">
  <div class="home-block food-block" onclick="openScreen('food')">
    ü•ó –ï–î–ê
  </div>
  <div class="home-block workout-block" onclick="openScreen('workout')">
    üèãÔ∏è –¢–†–ï–ù–ò–†–û–í–ö–ò
  </div>
  <div class="home-block stats-block" onclick="openScreen('stats')">
    üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê
  </div>
</div>

<!-- –ï–î–ê -->
<div id="food" class="screen">
  <div class="back" onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</div>
  <h3>–ï–¥–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>

  <div class="food-item">
    <input type="checkbox" id="oatmeal" onchange="toggleFood('oatmeal')">
    <span>–û–≤—Å—è–Ω–∫–∞ —Å –±–∞–Ω–∞–Ω–æ–º</span>
  </div>

  <div class="food-item">
    <input type="checkbox" id="chicken" onchange="toggleFood('chicken')">
    <span>–ö—É—Ä–∏—Ü–∞ —Å —Ä–∏—Å–æ–º</span>
  </div>

  <div class="food-item">
    <input type="checkbox" id="curd" onchange="toggleFood('curd')">
    <span>–¢–≤–æ—Ä–æ–≥</span>
  </div>

  <div class="water-box">
    <h4>–í–æ–¥–∞</h4>
    <p>–¶–µ–ª—å: <b>2000 –º–ª</b></p>

    <input type="number" id="waterInput" placeholder="–°–∫–æ–ª—å–∫–æ –≤—ã–ø–∏–ª (–º–ª)">
    <button onclick="addWater()">+</button>

    <p>–í—ã–ø–∏—Ç–æ: <span id="waterDone">0</span> –º–ª</p>
    <p>–û—Å—Ç–∞–ª–æ—Å—å: <span id="waterLeft">2000</span> –º–ª</p>
  </div>
</div>

<!-- –¢–†–ï–ù–ò–†–û–í–ö–ò -->
<div id="workout" class="screen">
  <div class="back" onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</div>
  <h3>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>

  <div class="day" onclick="openDay('monday')">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</div>
  <div class="day" onclick="openDay('wednesday')">–°—Ä–µ–¥–∞</div>
  <div class="day" onclick="openDay('friday')">–ü—è—Ç–Ω–∏—Ü–∞</div>
</div>

<!-- –î–ï–ù–¨ -->
<div id="day" class="screen">
  <div class="back" onclick="openScreen('workout')">‚Üê –ù–∞–∑–∞–¥</div>
  <h3 id="dayTitle"></h3>

  <div class="exercise">
    –ñ–∏–º –ª—ë–∂–∞:
    <input type="number" id="bench">
    <button onclick="saveExercise('bench')">+</button>
  </div>

  <div class="exercise">
    –ü—Ä–∏—Å–µ–¥:
    <input type="number" id="squat">
    <button onclick="saveExercise('squat')">+</button>
  </div>
</div>

<!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
<div id="stats" class="screen">
  <div class="back" onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</div>
  <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
  <p>–ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ</p>
</div>

<script>
Telegram.WebApp.ready();

/* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
function openScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function goHome() {
  openScreen('home');
}

/* ===== –ï–î–ê ===== */
function toggleFood(name) {
  localStorage.setItem('food_' + name, document.getElementById(name).checked);
}

['oatmeal','chicken','curd'].forEach(f => {
  const saved = localStorage.getItem('food_' + f);
  if (saved === 'true') document.getElementById(f).checked = true;
});

/* ===== –í–û–î–ê ===== */
let water = Number(localStorage.getItem('water')) || 0;
const goal = 2000;

function updateWater() {
  waterDone.innerText = water;
  waterLeft.innerText = Math.max(goal - water, 0);
}

function addWater() {
  const v = Number(waterInput.value);
  if (!v) return;
  water += v;
  localStorage.setItem('water', water);
  waterInput.value = '';
  updateWater();
}
updateWater();

/* ===== –¢–†–ï–ù–ò–†–û–í–ö–ò ===== */
let currentDay = '';

function openDay(day) {
  currentDay = day;
  dayTitle.innerText = day;
  openScreen('day');

  ['bench','squat'].forEach(ex => {
    const saved = localStorage.getItem(day + '_' + ex);
    if (saved) document.getElementById(ex).value = saved;
  });
}

function saveExercise(ex) {
  const v = document.getElementById(ex).value;
  if (!v) return;
  localStorage.setItem(currentDay + '_' + ex, v);
  alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
}
</script>

</body>
</html>
