<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<!-- ‚ùå –ó–∞–ø—Ä–µ—â–∞–µ–º –∑—É–º -->
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Fitness Mini App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f5f5;
}

.screen {
  display: none;
  position: fixed;
  inset: 0;
  padding: 16px;
  overflow-y: auto;
  background: #f5f5f5;
}

.screen.active { display: block; }

h2 { margin-top: 0; }

.section {
  background: white;
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 16px;
}

.row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.btn {
  padding: 10px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.add-btn {
  font-size: 28px;
  cursor: pointer;
}

/* ===== HOME ===== */
#home {
  display: flex;
  flex-direction: column;
}

.home-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  background: white;
  margin-bottom: 8px;
  border-radius: 12px;
  cursor: pointer;
}

/* ===== FOOD ===== */
.food-item {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
}

.food-item input {
  width: 28px;
  height: 28px;
  margin-right: 10px;
}

.food-actions {
  margin-left: auto;
  display: flex;
  gap: 8px;
}

/* ===== INPUT ===== */
input, textarea {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<!-- ================= HOME ================= -->
<div id="home" class="screen active">
  <div class="home-btn" onclick="openScreen('food')">üçΩ –ï–î–ê</div>
  <div class="home-btn" onclick="openScreen('workout')">üèãÔ∏è –¢–†–ï–ù–ò–†–û–í–ö–ò</div>
  <div class="home-btn" onclick="openScreen('stats')">üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</div>
</div>

<!-- ================= FOOD ================= -->
<div id="food" class="screen">
  <h2>–ï–¥–∞</h2>

  <!-- –ó–ê–í–¢–†–ê–ö -->
  <div class="section">
    <div class="row">
      <b>–ó–∞–≤—Ç—Ä–∞–∫</b>
      <span class="add-btn" onclick="openAddFood('breakfast')">‚ûï</span>
    </div>
    <div id="breakfastList"></div>
  </div>

  <!-- –û–ë–ï–î -->
  <div class="section">
    <div class="row">
      <b>–û–±–µ–¥</b>
      <span class="add-btn" onclick="openAddFood('lunch')">‚ûï</span>
    </div>
    <div id="lunchList"></div>
  </div>

  <!-- –£–ñ–ò–ù -->
  <div class="section">
    <div class="row">
      <b>–£–∂–∏–Ω</b>
      <span class="add-btn" onclick="openAddFood('dinner')">‚ûï</span>
    </div>
    <div id="dinnerList"></div>
  </div>

  <!-- –í–û–î–ê -->
  <div class="section">
    <div class="row">
      <b>–í–æ–¥–∞</b>
      <span onclick="editWater()">‚úèÔ∏è</span>
    </div>
    <p>–¶–µ–ª—å: <span id="waterGoal">2000</span> –º–ª</p>
    <button class="btn" onclick="addWater()">‚ûï 250 –º–ª</button>
    <p>–í—ã–ø–∏—Ç–æ: <span id="waterDone">0</span></p>
    <p>–û—Å—Ç–∞–ª–æ—Å—å: <span id="waterLeft">2000</span></p>
  </div>

  <button class="btn" onclick="openScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ================= ADD FOOD ================= -->
<div id="foodAdd" class="screen">
  <h2>–ë–ª—é–¥–æ</h2>

  <input id="foodName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞">
  <textarea id="foodComp" placeholder="–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≥—Ä–∞–º–º–æ–≤–∫–∏"></textarea>

  <button class="btn" onclick="saveFood()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  <button class="btn" onclick="openScreen('food')">–û—Ç–º–µ–Ω–∞</button>
</div>

<!-- ================= WORKOUT ================= -->
<div id="workout" class="screen">
  <h2>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
  <p>–î–æ–±–∞–≤–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ</p>
  <button class="btn" onclick="openScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ================= STATS ================= -->
<div id="stats" class="screen">
  <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
  <p>–î–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ</p>
  <button class="btn" onclick="openScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<script>
Telegram.WebApp.ready();

/* ===== NAV ===== */
function openScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ===== FOOD DATA ===== */
let currentMeal = '';
let foods = JSON.parse(localStorage.getItem('foods')) || {
  breakfast: [], lunch: [], dinner: []
};

function openAddFood(meal) {
  currentMeal = meal;
  foodName.value = '';
  foodComp.value = '';
  openScreen('foodAdd');
}

function saveFood() {
  foods[currentMeal].push({
    id: Date.now(),
    name: foodName.value,
    comp: foodComp.value,
    eaten: false
  });
  localStorage.setItem('foods', JSON.stringify(foods));
  renderFood();
  openScreen('food');
}

function toggleEat(meal, id) {
  const item = foods[meal].find(f => f.id === id);
  item.eaten = !item.eaten;
  localStorage.setItem('foods', JSON.stringify(foods));
  renderFood();
}

function renderFood() {
  ['breakfast','lunch','dinner'].forEach(meal => {
    const box = document.getElementById(meal+'List');
    box.innerHTML = '';
    foods[meal].forEach(f => {
      box.innerHTML += `
        <div class="food-item">
          <input type="checkbox" ${f.eaten?'checked':''}
          onclick="toggleEat('${meal}',${f.id})">
          ${f.name}
        </div>`;
    });
  });
}
renderFood();

/* ===== WATER ===== */
let waterGoal = Number(localStorage.getItem('waterGoal')) || 2000;
let water = Number(localStorage.getItem('water')) || 0;

function updateWater() {
  waterGoalSpan = document.getElementById('waterGoal');
  waterGoalSpan.innerText = waterGoal;
  waterDone.innerText = water;
  waterLeft.innerText = Math.max(waterGoal - water, 0);
}

function addWater() {
  water += 250;
  localStorage.setItem('water', water);
  updateWater();
}

function editWater() {
  const v = prompt('–°–∫–æ–ª—å–∫–æ –º–ª –≤–æ–¥—ã –≤ –¥–µ–Ω—å?', waterGoal);
  if (!v) return;
  waterGoal = Number(v);
  localStorage.setItem('waterGoal', waterGoal);
  updateWater();
}
updateWater();
</script>

</body>
</html>
