<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Mini App</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
    }

    .screen {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100vh;
      padding: 16px;
      background: #f5f5f5;
      overflow-y: auto;
    }

    .screen.active { display: block; }

    h2, h3 { margin-top: 0; }

    button {
      padding: 10px;
      margin-top: 8px;
      font-size: 16px;
      width: 100%;
    }

    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      font-size: 14px;
    }

    /* ===== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ===== */
    #home {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .home-btn {
      flex: 1;
      background: white;
      border-bottom: 1px solid #ddd;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* ===== –ï–î–ê ===== */
    .meal {
      background: white;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 6px;
    }

    .dish {
      background: #eee;
      padding: 8px;
      margin-top: 8px;
      white-space: pre-line;
      border-radius: 4px;
    }

    .water-box {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }

    .exercise { margin-bottom: 10px; }
  </style>
</head>

<body>

<!-- ===== HOME ===== -->
<div id="home" class="screen active">
  <div class="home-btn" onclick="openScreen('food')">üçΩ –ï–î–ê</div>
  <div class="home-btn" onclick="openScreen('workout')">üèãÔ∏è –¢–†–ï–ù–ò–†–û–í–ö–ò</div>
  <div class="home-btn" onclick="openScreen('stats')">üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</div>
</div>

<!-- ===== –ï–î–ê ===== -->
<div id="food" class="screen">
  <h2>–ï–¥–∞</h2>

  <div class="meal">
    <h3>üç≥ –ó–∞–≤—Ç—Ä–∞–∫</h3>
    <div id="breakfastList"></div>

    <input id="breakfastName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞">
    <textarea id="breakfastComp" placeholder="–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≥—Ä–∞–º–º–æ–≤–∫–∏"></textarea>
    <button onclick="addDish('breakfast')">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <div class="meal">
    <h3>üç≤ –û–±–µ–¥</h3>
    <div id="lunchList"></div>

    <input id="lunchName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞">
    <textarea id="lunchComp" placeholder="–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≥—Ä–∞–º–º–æ–≤–∫–∏"></textarea>
    <button onclick="addDish('lunch')">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <div class="meal">
    <h3>üçΩ –£–∂–∏–Ω</h3>
    <div id="dinnerList"></div>

    <input id="dinnerName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞">
    <textarea id="dinnerComp" placeholder="–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≥—Ä–∞–º–º–æ–≤–∫–∏"></textarea>
    <button onclick="addDish('dinner')">–î–æ–±–∞–≤–∏—Ç—å</button>
  </div>

  <div class="water-box">
    <h3>üíß –í–æ–¥–∞</h3>
    <p>–¶–µ–ª—å: 2000 –º–ª</p>

    <input type="number" id="waterInput" placeholder="–º–ª">
    <button onclick="addWater()">+</button>

    <p>–í—ã–ø–∏—Ç–æ: <span id="waterDone">0</span> –º–ª</p>
    <p>–û—Å—Ç–∞–ª–æ—Å—å: <span id="waterLeft">2000</span> –º–ª</p>
  </div>

  <button onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –¢–†–ï–ù–ò–†–û–í–ö–ò ===== -->
<div id="workout" class="screen">
  <h2>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>

  <div class="exercise">
    –ñ–∏–º –ª—ë–∂–∞:
    <input id="bench" type="number">
    <button onclick="saveExercise('bench')">+</button>
  </div>

  <div class="exercise">
    –ü—Ä–∏—Å–µ–¥:
    <input id="squat" type="number">
    <button onclick="saveExercise('squat')">+</button>
  </div>

  <button onclick="resetTraining()">–°–±—Ä–æ—Å–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
  <button onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===== -->
<div id="stats" class="screen">
  <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
  <p>–î–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ</p>
  <button onclick="goHome()">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<script>
Telegram.WebApp.ready();

/* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
function openScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function goHome() { openScreen('home'); }

/* ===== –ï–î–ê ===== */
function loadMeals(type) {
  const list = document.getElementById(type + 'List');
  list.innerHTML = '';
  const data = JSON.parse(localStorage.getItem(type) || '[]');
  data.forEach(d => {
    const div = document.createElement('div');
    div.className = 'dish';
    div.innerText = d;
    list.appendChild(div);
  });
}

function addDish(type) {
  const name = document.getElementById(type + 'Name').value;
  const comp = document.getElementById(type + 'Comp').value;
  if (!name || !comp) return;

  const data = JSON.parse(localStorage.getItem(type) || '[]');
  data.push(name + '\n' + comp);
  localStorage.setItem(type, JSON.stringify(data));

  document.getElementById(type + 'Name').value = '';
  document.getElementById(type + 'Comp').value = '';
  loadMeals(type);
}

['breakfast','lunch','dinner'].forEach(loadMeals);

/* ===== –í–û–î–ê ===== */
let water = Number(localStorage.getItem('water')) || 0;
const goal = 2000;

function updateWater() {
  waterDone.innerText = water;
  waterLeft.innerText = Math.max(goal - water, 0);
}
function addWater() {
  const v = Number(waterInput.value);
  if (!v) return;
  water += v;
  localStorage.setItem('water', water);
  waterInput.value = '';
  updateWater();
}
updateWater();

/* ===== –¢–†–ï–ù–ò–†–û–í–ö–ò ===== */
function saveExercise(name) {
  const v = document.getElementById(name).value;
  if (!v) return;
  localStorage.setItem('exercise_' + name, v);
  alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');
}
function resetTraining() {
  localStorage.removeItem('exercise_bench');
  localStorage.removeItem('exercise_squat');
  alert('–°–±—Ä–æ—à–µ–Ω–æ');
}
</script>

</body>
</html>
